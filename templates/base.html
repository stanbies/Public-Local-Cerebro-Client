<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Cerebro Companion{% endblock %}</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Custom animations */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .animate-fade-in-up { animation: fade-in-up 0.6s ease-out both; }
        .animate-pulse-slow { animation: pulse-slow 2s ease-in-out infinite; }
        .drop-zone { transition: all 0.3s ease; }
        .drop-zone.dragging { border-color: #3b82f6; background-color: #eff6ff; transform: scale(1.02); }
        .log-entry { animation: fade-in-up 0.3s ease-out; }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); }
        .progress-bar { transition: width 0.3s ease; }
        
        /* Simple icon styles as fallback */
        .icon { display: inline-block; width: 1em; height: 1em; }
    </style>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gradient-to-br from-white via-blue-50 to-blue-100">
    {% block content %}{% endblock %}
    
    <!-- Load Lucide at the end of body -->
    <script src="https://unpkg.com/lucide@0.294.0/dist/umd/lucide.min.js"></script>
    
    <script>
        // Initialize Lucide icons when script loads
        function initIcons() {
            if (typeof lucide !== 'undefined' && lucide.createIcons) {
                try {
                    lucide.createIcons();
                } catch(e) {
                    console.warn('Lucide init error:', e);
                }
            }
        }
        
        // Try immediately and also on DOMContentLoaded
        initIcons();
        document.addEventListener('DOMContentLoaded', initIcons);
        
        // Function to explicitly exit the application
        function exitApplication() {
            if (confirm('Are you sure you want to exit Cerebro Companion?')) {
                fetch('/api/shutdown', { method: 'POST' })
                    .then(() => {
                        document.body.innerHTML = '<div class="flex items-center justify-center min-h-screen"><div class="text-center"><h1 class="text-2xl font-bold text-gray-700">Application Closed</h1><p class="text-gray-500 mt-2">You can close this browser tab now.</p></div></div>';
                    })
                    .catch(() => {});
            }
        }
    </script>
    
    {% block extra_scripts %}{% endblock %}
</body>
</html>
